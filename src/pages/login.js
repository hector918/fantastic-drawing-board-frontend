import { useEffect } from 'react';
import { Link, useNavigate } from 'react-router-dom';
import {srv} from '../fetch_';
import {redraw_universal} from '../components/obj-db';
export default function Login({setUsername}) {
  let navigator = useNavigate();
  function on_submit(evt) {
    evt.preventDefault();

    srv.login({name:evt.target.name.value}, (data)=>{
      if(data.name){
        setUsername(data.name);
        navigator("/show");
      }
    })
  }
  useEffect(()=>{
    document.querySelector("input").focus();
    console.log(document.querySelector("#logo_canvas"),logo)
    redraw_universal(document.querySelector("#logo_canvas"), logo, 0.5);
  },[])
  return (
    <div className="empty" style={{height:"100%"}}>
      <div className="empty-icon">
        {/* <i className="icon icon-people"></i> */}
        <figure className="figure">
          
          <canvas id='logo_canvas' width="750" height="750" style={{margin:"auto",borderTop: "#ccc 2px dashed ",height:"300px","width":"300px"}} />
          {/* <img style={{margin:"auto",borderTop: "#ccc 2px solid",borderLeft: "#ccc 2px solid",padding: "5px"}} className="img-responsive ..." src="../login-logo.png" alt="macOS Yosemite Wallpaper"/> */}
          <figcaption className="figure-caption text-center"><Link to="/
          ">Drawing board</Link></figcaption>
        </figure>
      </div>
      <form onSubmit={on_submit}>
        <p className="empty-title h5">login with name</p>
        <p className="empty-subtitle"><input className="form-input" type="text"  maxLength="20" name='name' placeholder="Name" style={{maxWidth:"50%",margin:"auto"}}/></p>
        <div className="empty-action">
          <button className="btn btn-primary">Send a name</button>

        </div>
      </form>
    </div>
  )
}

let logo = JSON.parse("[{\"brush\":\"red\",\"move\":[[147,418,0],[146,417,15],[143,415,47],[138,413,79],[135,412,112],[132,411,144],[127,410,176],[120,410,207],[113,409,239],[104,409,272],[100,409,305],[94,409,337],[86,410,367],[81,411,400],[74,414,439],[67,415,472],[60,419,505],[51,424,536],[46,427,567],[39,433,600],[33,438,632],[30,442,664],[27,446,696],[24,452,736],[21,458,768],[18,468,800],[16,474,832],[15,480,863],[14,487,896],[14,495,928],[14,505,960],[14,512,992],[16,523,1023],[18,531,1056],[20,540,1089],[22,547,1119],[26,557,1152],[28,563,1184],[32,568,1216],[34,573,1248],[37,578,1280],[43,584,1312],[49,588,1344],[59,595,1376],[68,599,1408],[75,601,1439],[80,601,1472],[88,601,1505],[94,601,1538],[108,601,1576],[114,601,1607],[120,601,1639],[127,599,1672],[133,598,1705],[139,596,1737],[145,593,1767],[150,589,1807],[154,587,1839],[157,584,1879],[161,580,1912],[167,571,1944],[170,566,1975],[174,560,2007],[176,557,2040]]},{\"brush\":\"red\",\"move\":[[183,363,0],[185,364,64],[188,367,95],[194,375,128],[197,382,159],[198,389,192],[198,397,224],[198,406,257],[198,414,288],[198,419,319],[198,429,352],[198,430,504],[199,422,536],[201,411,567],[204,399,599],[205,386,632],[207,380,672],[212,373,703],[216,368,736],[219,367,769],[225,367,800],[236,366,832],[245,366,863],[252,366,895]]},{\"brush\":\"red\",\"move\":[[277,360,0],[278,360,46],[281,360,79],[288,360,111],[299,359,143],[305,358,174],[314,355,206],[322,349,247],[325,347,278],[326,343,311],[327,340,342],[327,336,374],[325,333,407],[322,329,439],[314,326,473],[308,326,511],[303,326,543],[299,328,575],[295,332,607],[291,339,640],[289,349,672],[288,359,703],[288,366,735],[290,371,766],[297,379,799],[302,381,830],[310,383,863],[317,383,894],[323,383,927],[327,382,958],[333,381,1054]]},{\"brush\":\"red\",\"move\":[[388,300,0],[388,299,31],[388,296,72],[387,294,120],[384,294,153],[381,294,184],[379,294,216],[376,294,271],[371,297,303],[365,302,337],[363,306,370],[361,313,400],[359,320,432],[359,324,464],[359,329,495],[359,332,528],[359,334,559],[364,337,600],[366,338,640],[370,338,671],[375,337,704],[379,334,736],[383,330,769],[386,327,799],[388,322,840],[391,316,872],[391,312,904],[391,308,944],[392,304,975],[392,301,1008],[391,299,1144],[390,300,1175],[389,306,1208],[388,312,1240],[388,318,1271],[390,326,1304],[394,331,1337],[396,333,1369],[399,334,1400],[403,335,1432],[405,335,1463],[408,337,1503],[409,337,1575]]},{\"brush\":\"red\",\"move\":[[423,273,0],[424,273,22],[429,271,56],[436,270,86],[444,270,118],[454,269,151],[459,268,190],[464,267,223],[469,267,256],[476,267,287],[490,266,319],[493,265,399],[494,265,502]]},{\"brush\":\"red\",\"move\":[[467,245,0],[467,246,8],[465,252,40],[464,257,72],[463,261,104],[462,273,136],[461,284,168],[460,292,199],[460,298,232],[460,306,264],[461,311,298],[462,314,328],[466,319,360],[470,324,391],[473,325,448],[477,325,481],[485,324,512],[487,323,567],[488,320,736]]},{\"brush\":\"red\",\"move\":[[526,213,0],[526,214,72],[526,220,112],[526,227,144],[526,234,183],[526,240,224],[526,245,257],[526,249,287],[526,252,320],[526,257,359],[526,262,400],[526,265,441],[526,269,480],[526,272,520],[526,274,552],[526,277,584],[526,280,641],[526,281,672],[526,283,704]]},{\"brush\":\"red\",\"move\":[[527,217,0],[528,217,128],[530,216,175],[532,216,233],[533,216,616],[533,219,655],[533,224,688],[533,231,719],[533,236,751],[533,242,784],[533,247,833],[534,251,872],[534,256,911],[534,258,944],[535,262,975],[535,265,1008],[536,268,1040],[536,271,1080],[536,274,1120],[536,276,1160],[536,278,1207],[535,279,1288],[534,280,1320],[532,281,1400],[529,281,1520],[529,281,1666]]},{\"brush\":\"red\",\"move\":[[577,173,0],[577,175,16],[577,183,48],[577,193,79],[577,203,112],[578,211,143],[580,220,175],[581,224,208],[582,230,247],[585,237,279],[586,241,328],[586,242,391],[586,243,432],[588,243,544],[590,243,576],[593,239,608],[595,235,640],[600,224,670],[604,213,703],[606,207,735],[609,197,767],[611,190,799],[613,185,831],[616,179,864],[618,171,895],[619,168,927]]},{\"brush\":\"red\",\"move\":[[655,184,0],[656,184,14],[663,182,47],[672,181,80],[685,178,113],[698,176,143],[709,172,174],[718,169,207],[726,165,240],[730,162,271],[731,159,319],[731,157,351],[729,155,392],[721,150,423],[714,149,455],[708,148,487],[703,148,528],[698,149,559],[693,152,591],[687,157,624],[683,161,655],[676,172,687],[672,178,718],[671,185,751],[671,191,783],[671,195,814],[673,198,847],[675,199,880],[680,202,914],[687,203,944],[693,203,982],[699,203,1014],[706,203,1047],[711,203,1080],[715,202,1119],[721,201,1151]]},{\"brush\":\"red\",\"move\":[[533,178,0],[532,178,56],[530,178,126],[529,179,159],[527,179,206],[525,180,248],[524,182,288],[524,184,319],[524,186,375],[524,189,415],[524,190,473],[525,191,503],[527,191,543],[529,191,591],[532,191,631],[534,190,695],[536,188,736],[536,186,800],[536,185,832],[536,184,889],[536,182,943],[535,181,983],[534,180,1056],[532,179,1111],[529,179,1143],[527,180,1215],[526,182,1248],[526,182,1290],[525,186,1327],[526,187,1391],[528,187,1423],[530,187,1464],[532,187,1495],[532,186,1639],[532,184,1672],[531,182,1791],[529,182,1823],[528,183,1910],[528,185,1959],[529,185,1991],[532,185,2024],[535,185,2056],[536,185,2089],[536,184,2191],[536,182,2232],[535,182,2264],[533,182,2295],[530,182,2368],[529,183,2399],[526,185,2431],[526,187,2470],[527,189,2552],[529,189,2583],[531,189,2614],[532,186,2656],[532,183,2687],[532,182,2719],[530,182,2847],[525,182,2888],[524,183,2934],[522,186,2974],[523,186,3031],[525,186,3063],[530,185,3094],[532,182,3183],[533,180,3215],[533,179,3273],[532,179,3423],[530,179,3495]]},{\"brush\":\"red\",\"move\":[[447,603,0],[448,603,104],[451,603,137],[456,603,168],[462,603,200],[467,604,231],[472,604,262],[476,604,296],[482,604,328],[492,604,359],[498,604,391],[503,604,422],[510,603,455],[522,602,489],[532,602,522],[546,600,558],[557,598,598],[563,597,630],[574,594,662],[584,593,694],[596,589,726],[606,586,758],[621,580,790],[631,576,823],[642,570,855],[652,564,888],[662,558,921],[674,548,959],[685,538,990],[693,531,1022],[700,522,1055],[706,515,1088],[714,503,1122],[720,493,1160],[726,483,1192],[730,475,1223],[736,467,1255],[740,460,1295],[743,453,1326],[746,448,1359],[747,444,1391],[748,439,1422],[750,434,1456],[752,427,1496],[752,422,1535],[752,417,1567],[753,411,1599],[753,407,1631]]}]");